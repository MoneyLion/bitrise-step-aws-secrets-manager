title: Fetch secrets from AWS Secrets Manager
summary: Fetch secrets from AWS Secrets Manager
description: |
  The main intention of this Step is to allow storage of sensitive data on AWS Secrets Manager, and fetching them on-demand during Bitrise workflow execution.

  When a workflow runs, the Step fetches a list of specified secrets from AWS Secrets Manager.

  The fetched secrets are then propagated into subsequent steps in the workflow.

  Checkout the main repository README for usage guide.

website: https://github.com/MoneyLion/bitrise-step-aws-secrets-manager
source_code_url: https://github.com/MoneyLion/bitrise-step-aws-secrets-manager
support_url: https://github.com/MoneyLion/bitrise-step-aws-secrets-manager/issues

type_tags:
  - utility

is_requires_admin_user: true
is_always_run: false
is_skippable: false

toolkit:
  go:
    package_name: moneylion.com/security/bitrise-step-aws-secrets-manager

inputs:
  - aws_role_arn: $SECRETS_AWS_ROLE_ARN
    opts:
      title: AWS IAM role ARN
      summary: The ARN of AWS IAM role to assume.
      description: The ARN of AWS IAM role to assume. This role should have the necessary permission to read secrets from AWS Secrets Manager.

  - secret_list:
    opts:
      title: Secret list
      summary: A list of secrets to fetch.
      description: |
        A newline separated list of secrets to fetch from AWS Secrets Manager.

        Each line is in the form of:

        ```
        <Secret ARN> # <JSON object key> # <Environment variable>
        ```

        For example, given the secret with an ARN `arn:aws:secret-1`, and a secret value:

        ```
        {
          "username": "admin",
          "password": "str0ngpassword"
        }
        ```

        Specifying this line in the secret list:

        ```
        arn:aws:secret-1 # username # USERNAME
        ```

        Fetches the secret, retrieves the JSON value under the key `username`, and store that value in the `USERNAME` environment variable. `$USERNAME` will now contain the value `admin`.

      is_required: true
